FROM amazonlinux:latest

# Install GraalVM and dependencies
ENV LANG=en_US.UTF-8
RUN yum install -y gcc gcc-c++ zlib-devel zip tar gzip && yum -y clean all
RUN curl -4 -L https://github.com/graalvm/graalvm-ce-builds/releases/download/vm-20.2.0/graalvm-ce-java11-linux-amd64-20.2.0.tar.gz -o /tmp/graalvm-ce-java11-linux-amd64-20.2.0.tar.gz
RUN tar -zxvf /tmp/graalvm-ce-java11-linux-amd64-20.2.0.tar.gz -C /tmp && mv /tmp/graalvm-ce-java11-20.2.0 /usr/lib/graalvm && rm -rf /tmp/*
RUN /usr/lib/graalvm/bin/gu install native-image
ENV PATH=/usr/lib/graalvm/bin:${PATH}