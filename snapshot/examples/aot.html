<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/site/asciidoc/examples/aot.adoc at 2024-04-18
 | Rendered using Apache Maven Fluido Skin 1.11.1
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <meta name="date" content="2024-04-18 16:46:19 UTC" />
    <title>Micronaut Maven Plugin - Plugin &#x2013; [Untitled]</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.11.1.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />
    <script src="../js/apache-maven-fluido-1.11.1.min.js"></script>
    <style>.github-fork-ribbon:before { background-color: black; }</style>
  </head>
  <body class="topBarEnabled">
    <a class="github-fork-ribbon right-top" href="https://github.com/micronaut-projects/micronaut-maven-plugin" data-ribbon="Fork me on GitHub" title="Fork me on GitHub">Fork me on GitHub</a>
    <header id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
            <div class="container">
              <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
              </a>
          <nav class="nav-collapse">
<a class="brand" href="../index.html"  title="Micronaut Logo"><img src="https://micronaut.io/wp-content/uploads/2021/10/favicon-16x16-1.png" alt="Micronaut Logo" />
</a>
            <ul class="nav">
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../index.html" title="Introduction">Introduction</a></li>
            <li><a href="../plugin-info.html" title="Goals">Goals</a></li>
            <li><a href="../release-history.html" title="Release History">Release History</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">Examples <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li><a href="../examples/run.html" title="Running in development mode">Running in development mode</a></li>
            <li><a href="../examples/package.html" title="Packaging">Packaging</a></li>
            <li><a href="../dockerfile-mojo.html" title="Generating Dockerfiles">Generating Dockerfiles</a></li>
            <li><a href="../examples/deploy.html" title="Deploying Docker images">Deploying Docker images</a></li>
            <li><a title="Using Micronaut AOT">Using Micronaut AOT</a></li>
            <li><a href="../examples/test-resources.html" title="Integration with Micronaut Test Resources">Integration with Micronaut Test Resources</a></li>
            <li><a href="../examples/openapi.html" title="Generating OpenAPI clients or servers">Generating OpenAPI clients or servers</a></li>
            <li><a href="../examples/bean-import.html" title="Importing beans from project dependencies">Importing beans from project dependencies</a></li>
        </ul>
      </li>
      <li class="dropdown">
        <a class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li class="dropdown-submenu">
<a href="../project-info.html" title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                  <li><a href="../ci-management.html" title="CI Management">CI Management</a></li>
                  <li><a href="../dependencies.html" title="Dependencies">Dependencies</a></li>
                  <li><a href="../dependency-info.html" title="Dependency Information">Dependency Information</a></li>
                  <li><a href="../issue-management.html" title="Issue Management">Issue Management</a></li>
                  <li><a href="../licenses.html" title="Licenses">Licenses</a></li>
                  <li><a href="../plugin-management.html" title="Plugin Management">Plugin Management</a></li>
                  <li><a href="../plugins.html" title="Plugins">Plugins</a></li>
                  <li><a href="../scm.html" title="Source Code Management">Source Code Management</a></li>
                  <li><a href="../summary.html" title="Summary">Summary</a></li>
                  <li><a href="../team.html" title="Team">Team</a></li>
              </ul>
            </li>
            <li class="dropdown-submenu">
<a href="../project-reports.html" title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                  <li><a href="../plugin-info.html" title="Plugin Documentation">Plugin Documentation</a></li>
                  <li><a href="../apidocs/index.html" title="Javadoc">Javadoc</a></li>
                  <li><a href="../testapidocs/index.html" title="Test Javadoc">Test Javadoc</a></li>
                  <li><a href="../checkstyle.html" title="Checkstyle">Checkstyle</a></li>
              </ul>
            </li>
        </ul>
      </li>
            </ul>
          </nav>
          <div class="nav-collapse">
<form id="search-form" action="https://www.google.com/search" method="get"  class="navbar-search pull-right" >
  <input value="github.com/micronaut-projects/micronaut-maven-plugin/micronaut-maven-plugin" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" placeholder="Search with Google..." />
</form>
    <ul class="nav pull-right" style="border:none; margin-top: 7px"><li>
    <a href="https://twitter.com/micronautfw" class="twitter-follow-button" data-show-count="true" data-align="right" data-size="large" data-show-screen-name="true" data-lang="en">Follow micronautfw</a>
    <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
    </li></ul>
            <ul class="nav pull-right">
              <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown">External Links <b class="caret"></b></a>
                <ul class="dropdown-menu">
    <li><a href="https://micronaut.io" title="Micronaut">Micronaut</a></li>
                </ul>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </header>
    <div class="container">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>Micronaut Maven Plugin - Plugin</h1>
</div>
</div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2024-04-18<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 4.5.3-SNAPSHOT</li>
          </ul>
        </div>
      </header>
        <main id="bodyColumn" >
<div class="sect2">
<h3 id="using_micronaut_aot">Using Micronaut AOT</h3>
<div class="paragraph">
<p><strong>WARNING</strong>: The Micronaut AOT module is in experimental stages. Use at your own risk!</p>
</div>
<div class="paragraph">
<p><a href="https://micronaut-projects.github.io/micronaut-aot/latest/guide/">Micronaut AOT</a> is a module which aims at pre-computing
a number of things at <em>build time</em> in order to provide faster startup times and smaller binaries. At the moment, it
supports optimizing Micronaut applications only (Micronaut libraries or functions will be supported in a future release).</p>
</div>
<div class="paragraph">
<p>To enable Micronaut AOT, simply set the property <code>micronaut.aot.enabled</code>, either in the POM or via the command-line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mvn package -Dmicronaut.aot.enabled=true</pre>
</div>
</div>
<div class="paragraph">
<p>When Micronaut AOT is enabled, the packaged (or exploded) format of the application will contain some optimizations
computed at build time. It may contain, for example, additional classes, or even have different resources.</p>
</div>
<div class="paragraph">
<p><strong>IMPORTANT</strong>: Micronaut AOT is a deployment optimization: it adds to build time, in order to make the final application
faster to start, or the native images smaller. Therefore, if you use the AOT tasks during development, your feedback
cycle will be slower (but the application will start faster). It is a good idea, however, to check the result of the
optimization locally, similarly to what youâ€™d do for a native image.</p>
</div>
<div class="paragraph">
<p>Currently, Micronaut AOT supports 2 runtimes: <code>jit</code> (the default) and <code>native</code>. To change it, use the
<code>micronaut.aot.runtime</code> property. Note that if your <code>packaging</code> and <code>micronaut.aot.runtime</code> properties don&#8217;t match,
the plugin will issue a warning in the build log:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mvn package -Dmicronaut.aot.enabled=true -Dpackaging=native-image

[INFO] --- mn:4.0.0:aot-sample-config (default-cli) @ demo ---
[WARNING] Packaging is set to [native-image], but Micronaut AOT runtime is set to [jit]. Please change them so that they match</pre>
</div>
</div>
<div class="sect3">
<h4 id="defining_additional_aot_dependencies">Defining additional AOT dependencies</h4>
<div class="paragraph">
<p>It is possible to add additional dependencies to the AOT execution classpath that may be required by some optimizations,
or to include an external AOT optimizer (in the future, some modules such as <code>micronaut-security</code> may offer additional
optimizers that can be used).</p>
</div>
<div class="paragraph">
<p>For example, the <code>logback.xml.to.java</code> optimization requires additional dependencies that can be defined in your POM
as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">  <span style="color:#070;font-weight:bold">&lt;build&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;plugins&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;plugin&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>io.micronaut.maven<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>micronaut-maven-plugin<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;configuration&gt;</span>
          <span style="color:#070;font-weight:bold">&lt;aotDependencies&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>
              <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>ch.qos.logback<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
              <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>logback-classic<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
              <span style="color:#070;font-weight:bold">&lt;version&gt;</span>1.4.5<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;dependency&gt;</span>
              <span style="color:#070;font-weight:bold">&lt;groupId&gt;</span>org.fusesource.jansi<span style="color:#070;font-weight:bold">&lt;/groupId&gt;</span>
              <span style="color:#070;font-weight:bold">&lt;artifactId&gt;</span>jansi<span style="color:#070;font-weight:bold">&lt;/artifactId&gt;</span>
              <span style="color:#070;font-weight:bold">&lt;version&gt;</span>2.4.0<span style="color:#070;font-weight:bold">&lt;/version&gt;</span>
            <span style="color:#070;font-weight:bold">&lt;/dependency&gt;</span>
          <span style="color:#070;font-weight:bold">&lt;/aotDependencies&gt;</span>
        <span style="color:#070;font-weight:bold">&lt;/configuration&gt;</span>
      <span style="color:#070;font-weight:bold">&lt;/plugin&gt;</span>
    <span style="color:#070;font-weight:bold">&lt;/plugins&gt;</span>
  <span style="color:#070;font-weight:bold">&lt;/build&gt;</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="configuration">Configuration</h4>
<div class="paragraph">
<p>Micronaut AOT can be configured with a <code>.properties</code> file. To get started with the possible options and their
description, run the <code>aot-sample-config</code> goal:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>$ mvn -Dmicronaut.aot.enabled mn:aot-sample-config

[INFO] ...
[INFO] Executing Micronaut AOT analysis
[INFO] Sample configuration file written to /my-app/target/aot/jit/aot.properties
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------</pre>
</div>
</div>
<div class="paragraph">
<p>Then, copy the <code>target/aot/jit/aot.properties</code> to your root directory, and adapt it to your needs. If using a different
directory, use the <code>micronaut.aot.config</code> property to specify its location.</p>
</div>
<div class="paragraph">
<p>For a full list of configuration options, check the <a href="../aot-analysis-mojo.html"><code>aot-analysis</code> goal documentation</a>.</p>
</div>
</div>
</div>
        </main>
    </div>
    <hr/>
    <footer>
      <div class="container">
        <div class="row">
            <p>&#169;      2020&#x2013;2024
<a href="https://micronaut.io/">Micronaut</a>
</p>
        </div>
        <p id="poweredBy" class="pull-right"><a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="../images/logos/maven-feather.png" /></a>
</p>
      </div>
    </footer>
<script>
	if(anchors) {
	  anchors.add();
	}
</script>
  </body>
</html>
